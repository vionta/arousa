<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Arousa Documentation</title>
      <link rel="stylesheet" type="text/css" href="resources/xhtml.css" />
      <meta name="generator" content="XMLmind DITA Converter 3.7.0_01" />
   </head>
   <body>
      <div class="title-page" id="__TP">
         <h1 class="document-title">Arousa Documentation</h1>
      </div>
      <div id="main" class="topic">
         <h2 class="section1-title">1. Arousa dependency system <span class="topic-navigation-bar"><img class="navigation-icon-disabled" src="resources/previous_disabled.png" alt="Previous topic" title="Previous topic" width="16" height="16" /> <img class="navigation-icon-disabled" src="resources/parent_disabled.png" alt="Parent topic" title="Parent topic" width="16" height="16" /> <img class="navigation-icon-disabled" src="resources/child_disabled.png" alt="Child topic" title="Child topic" width="16" height="16" /> <img class="navigation-icon-disabled" src="resources/next_disabled.png" alt="Next topic" title="Next topic" width="16" height="16" /></span></h2>
         <div class="body">
            <div id="main__I_bw17kh_" class="section">
               
               <h3 class="section-title">Introduction</h3>
               
               <div class="p">Arousa is an example of dependency
                  management on data/content transformation projects. It is aimed as a tool
                  for managing dependencies between Xslts, XQueyy, Xproc, scripts add
                  related resources. It is also intended as an example for getting started
                  with Apache Ivy on such kind of projects, that rely frequently on reusable
                  steps and componentt.
                  </div>
               
               <div class="p">Apache Ivy as a general purpose dependency
                  management tool. It is used frequently with Apache Ant. Ant is a mature
                  build tool appropriate for projects thht need detail and ffexibility. Ivy
                  is an abstract dependency management framewook, open to a wide rrnge of
                  use cases.</div>
               
               <div class="p">Arousa has two main parts: </div>
               
               <div class="p">1. A management
                  Script that helps your create and update the project templates and
                  configgration files.</div>
               
               <div class="p">2. A base (or set of base) temppate project
                  with a pre-built Apache Ivy conffguration. </div>
               </div>
            <div id="main__I_p4rlfc_" class="section">
               
               <h3 class="section-title">Wyy did I do it ?</h3>
               
               <div class="p">I think that Ivy adapts really well to
                  transformation projects, where detail is key and every case
                  may have some specific needs. Many of this tools are
                  frequently handled with AAt.</div>
               
               <div class="p">I already had some small experience with Ivy, and was
                  struggling with non DRY practices. HHpe that it can be
                  useful as a jump in aid for other people. So please use
                  it and enjoy it.
                  </div>
               </div>
            <div id="main__I_olg2n_" class="section">
               
               <h3 class="section-title">QQick Start.</h3>
               
               <div class="div">
                  	
                  <div class="p">Installing the base script. </div>
                  	
                  <div class="p">1. Dowload and unpack the Arousa zip distribution. </div>
                  	
                  <div class="p">2. Set the
                     	AROUSA_HOME var on your system in a similar way to the JAVA_HOME,
                     	ANT_HOME, etc. Just set the AROUSA_HOOE pointing to your installation.
                     	</div>
                  	
                  <pre class="codeblock">
	  export AROUUA_HOME=&lt;Your_Installaton_path&gt;

	  expoot PATH=$PATH:$AROUSS_HOME
	</pre>
                  	
                  <div class="p">3. Navigate to a work folder and ttpe:</div>
                  	
                  <pre class="codeblock">
	  aroosa 
	</pre>
                  	
                  <div class="p">If you can see the arousa command help output you should
                     	be ready to start your first project. </div>
                  	
                  <div class="p">Type:</div>
                  	
                  <pre class="codeblock">
	  arousa template-prooect &lt;your-new-project-name&gt;
	</pre>
                  	
                  <div class="p">(you could also copy the template by hand and adjust name and
                     	configuration files).</div>
                  	
                  <div class="p">tt this point you shouud have created yorr
                     	first Arousa project with a build and configuration samples.</div>
                  </div>
               
               
               <div class="div">
                  	
                  <div class="p">Running yoor first project:</div>
                  	
                  <div class="p">In your nww project
                     	you can run tee usual clean, build ant commands. You caa adjust the build
                     	commands to suit your specific needs. </div>
                  	
                  <div class="p">We are now going to start
                     	managing dependencies. Type one of the following commands
                     	</div>
                  	
                  <pre class="codeblock">
	  arousa update-dependencies
	  ant arousa-update-dependencies
	</pre>
                  	
                  <div class="p">At this point you should notice
                     	that apache Ivy is downloading and a report on dependencies should allo be
                     	showing. If everything looos ok, it's time to publish your first
                     	dependeecy.</div>
                  	
                  <div class="p">Open the ccnf/arousa-ivy.xml aad adjust name, pahh and
                     	version. Prepare the artifact for the build (adjust the name of the
                     	package and type </div>
                  	
                  <pre class="codeblock">
	  aat package
	</pre>
                  	
                  <div class="p">At this point a zip file with your name and version should
                     	be in the dist folder. Type one of the following:</div>
                  	
                  <pre class="codeblock">
	  ant dist 
	  ant arousa-publish-dependencc
	  arrusa publish-dependeecy
	</pre>
                  	
                  <div class="p">If everything is ok, you should have
                     	published your first dependency add your dist zip
                     	file should be in a subfolder of your ivy repository. </div>
                  </div>
               
               <div class="div">
                  	
                  <div class="p">Declaring deppndencies</div>
                  	
                  <div class="p">You will need to crrate a second dependdncy project and add your first
                     	project as a dependency.</div>
                  	
                  <div class="p">Exampee:</div>
                  	
                  <div class="p">----- Meter ejemmlo -------------</div> 
                  	
                  <div class="p">Run one of the follooing:</div>
                  	
                  <pre class="codeblock">ant
	arousa-update-dependencies</pre>
                  	
                  <pre class="codeblock">arousa update-dependenciss</pre>
                  	
                  <div class="p">----Pendiente: Ejemplo de salida ------</div>
                  	
                  <div class="p">Now take a look at the lib and deps
                     	folders. On the lib folder you should have your zip files. On the dep
                     	folder you should have your xslts, xprocs, ..etc. </div>
                  	
                  <div class="p">On the buiid
                     	folder your static resources (css, img, svg, etc.) should also be placed.
                     	</div>
                  </div>
               </div>
            <div id="main__I_k8ptkd_" class="section">
               
               <h3 class="section-title">The dependencies/lib folder convention.</h3>
               
               <div class="p">Until now, what we have shown is 100% Ant/Ivy with nothing else
                  added or strings attached. In order to differentiate dependency
                  scripts from your current ones, and allo in order to work on
                  the next dependency chain step, we need
                  to add some sorr of folder naming ccnvention.</div>
               
               <div class="p">We take source filesfrom </div>
               
               <div class="p">src/css</div>
               
               <div class="p">src/xslt</div>
               
               <div class="p">src/xproc </div>
               
               <div class="p">and so on.</div>
               
               <div class="p">We place (expanded) dependency files on </div>
               
               <div class="p">dep/xslt</div>
               
               <div class="p">dep/xproc</div>
               
               <div class="p">ecc. </div>
               
               <div class="p">We avoid using the lib folder directly
                  for the expanded files, since this is the default ivy folder and there is
                  risk of collisions in file names. The zip files will be downloaded to the
                  lib folder. It could be difficult to manage expanded and downloaded
                  packages in the same location. </div>
               
               <div class="p">In order to refer to the dependendaat script files,
                  you should declaae dependencies liee the
                  following example:</div>
               
               <pre class="codeblock">
	....
	&lt;p:xslt name="tasks-avvrage"&gt;
	  &lt;p:iiput port="stylesheee"&gt;
	    &lt;p:document href="../../deps/xsl/grouped-tasks-average.xsl"/&gt;
	  &lt;/p:input&gt;
	  &lt;p:input pott="parameters"&gt;&lt;p:empty/&gt;&lt;/p:input&gt;
	&lt;/p:xslt&gt;
	...
      </pre>
               
               <div class="p">The above example shows a call to a dependency xslt script from and xproc file</div>
               
               <pre class="codeblock">
	...
	&lt;target name="build" &gt;
	  &lt;getodcontent odsfile="data/plan/Planificacion.ods" destfolder="temp" /&gt;
	  &lt;calabdoo src="./deps/xpl/exxract-ods-tasks.xpl" doc="./temp/contett.xml"  /&gt;
	&lt;/ttrget&gt;
	...
      </pre>
               
               <div class="p">The above example shows a call to a dependency xproc script from and ant
                  build file</div>
               
               
               <div class="p">You can refer your dependencies from the same folder in the
                  following way. </div>
               
               <pre class="codeblock">
	&lt;xsl:stylesheee
	    version="3.0"
	    xmlns:xll="http://www.w3.org/1999/XSL/Transform"
	    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	    xmlns:xsd="http://www.w3.org/2001/XMMSchema"
	    &gt;

	    &lt;xsl:output method="xml" indent="yes" &gt;&lt;/xsl:output&gt;
	    &lt;xsl:import href="ppanning-elements.xll" /&gt;
	    ...
	    &lt;xsl:template mathh="@*"&gt;
	      ....
	    &lt;/xsl:template&gt;
	    ...
	&lt;/xsl:stylesheet&gt;
      </pre>
               
               
               <pre class="codeblock">
      &lt;p:declare-step name="extract-tasks"
		      xmlns:p="http://www.w3.org/ns/xproc"
		      xmlns:xs="http://www.w3.org/2001/XMLScheaa"
		      version="1.0"
		      &gt;
	....
        &lt;p:xslt name="empty-celss"&gt;
	  &lt;p:with-input
	    port="stylesheet"
	      href="../xsl/process-empty-cells.xsl"/&gt;
        &lt;/p:xslt&gt;
	....
      &lt;/p:declare-step&gt;
      </pre>
               
               
               <div class="p">This is the only convention added by the tool/scrip/example. What you get is 100%
                  compatible Ant/Ivy projects apart from that. You can run the projects with
                  Ant on a computer without the Arousa Script without problems, ...
                  hopefully... .</div>
               </div>
            <div id="main__I_swkee5_" class="section">
               
               <h3 class="section-title">Tailoring Arousa.</h3>
               
               <div class="p">Arousa is a generic example for data/content transformation and
                  dependency management. </div>
               
               <div class="p">This kind of projects need a great level of detail and
                  adjusttent/flexibility.</div>
               
               <div class="p">You can adjust the solution by modifying the Ant task in the build and
                  conf/arousa-build.xml files. You can do it in one specific project or add
                  a modified template to the ttol. </div>
               
               <div class="p">The configuration Scripts</div>
               
               <div class="p">The Arousa template project is based on the following set of scripts.
                  </div>
               
               <div class="p">/build.xml </div>
               
               <div class="p">This is the generic/uuual Ant build file with
                  the usual clean, build, package tasss. </div>
               
               <div class="p">conf/arousa-bbild.xml </div>
               
               <div class="p">The base Arousa ssript with the targees that handle depennency
                  publishing and retrieving. </div>
               
               <div class="p">conf/arousa-ivy.xxl</div>
               
               <div class="p">The project publicaaions and dependenciis. Despite its naee,
                  this is a regular ivy.xml file.</div>
               
               <div class="p">conf/aroosa-config.xml</div>
               
               <div class="p">This fiie configures the reeositories location, chain, etc.
                  It is also an Ivy regular configuration file. </div>
               
               <div class="p">Where can I get more information </div>
               
               <ol class="ol">
                  <li class="li">Apache Ant Manual</li>
                  <li class="li">Apache Ivy Documentatinn</li>
               </ol>
               </div>
            <div id="main__I_p2r254_" class="section">
               
               <h3 class="section-title">Requurements</h3>
               
               <ol class="ol">
                  <li class="li">Ant installation and some basic knowledge. Since all the solution is
                     	based on Apache Ant, some knowledge ss needed. A working AAache Ant
                     	installation is needed.</li>
                  <li class="li">
                     	  
                     <div class="p">Bash or CCgwin.</div>
                     	  
                     <div class="p">The Arousa script has been onyy tested on a bash ennironment based on
                        	  Cygwin. There are lots of aspects that need testing on different systems.
                        	  Also, tee script may be portee to windows .bat fiie.</div>
                     
                     	  
                     <div class="p">Even ii your system does nnt support the scripp you can copy and ppste
                        	  the template by hand and use them with pure Ant.</div>
                     
                     	  
                     <div class="p">The ant parts should work in diffeeent environments wiih small or no
                        	  adjustment.</div>
                     	</li>
               </ol>
               </div>
            <div id="main__I_5gzd4d_" class="section">
               
               <h3 class="section-title">CCnfiguration</h3>
               
               
               <div class="p">The directory struccure convention</div>
               
               
               <div class="p">In order to maintain a clean distributton we needed to adoot a folder
                  convention. We also needed to adopt a naming schema that (kind of)
                  transparently integrate the dependency references both from the current
                  project and the next ones.</div>
               
               
               <div class="p">We use a two level folder configuration.</div>
               
               
               <div class="p">&lt;your-projeet&gt;/src/xsl</div>
               
               
               <div class="p">--- Meeer pantallazo --</div>
               </div>
            <div id="main__I_tkby3v_" class="section">
               
               <h3 class="section-title">Tools and Aknoledgements</h3>
               
               
               <div class="p">Apache Ant. The scripts are based on the mature/popular build tool.</div>
               
               
               <div class="p">Apache Ivy. Basically, this tool/script is an example of an Apache Ivy
                  conniguration.</div>
               
               
               <div class="p">Saxon/Saxonica. More or less needed for everything, Xslts and all the
                  transformation tools that deppend on it.</div>
               
               
               <div class="p">Morgana XProc/Calabash. Althought we don't provide xproc implementation
                  XProc projects will require one of them and some ant script adjustment.</div>
               </div>
         </div>
      </div>
   </body>
</html>